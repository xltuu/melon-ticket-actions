name: example

on:
  schedule:
    - cron: '*/5 * * * *' # 5분마다 실행

jobs:
  check-tickets: # job의 이름을 더 명확하게 변경
    runs-on: ubuntu-latest
    timeout-minutes: 5

    strategy: # 👈 1. strategy(전략) 블록 추가
      fail-fast: false # 👈 (선택 사항) 하나의 작업이 실패해도 나머지는 계속 실행하게 함
      matrix:
        # 100067부터 100088까지의 숫자 목록을 자동으로 생성합니다.
        schedule-id: ${{ fromJSON(format('[{0}]', join(range(100067, 100088 + 1), ','))) }}

    steps:
      - name: Check Tickets
        uses: xltuu/melon-ticket-actions@master
        with:
          product-id: 211942
          schedule-id: ${{ matrix.schedule-id }} # 👈 3. matrix에 있는 id를 하나씩 가져와 사용
          seat-id: 1_0
          slack-incoming-webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
          message: '<@U4CF18RKL> 티켓사세요! (회차: ${{ matrix.schedule-id }})' # 메시지에 어떤 회차인지 추가하면 더 좋음
